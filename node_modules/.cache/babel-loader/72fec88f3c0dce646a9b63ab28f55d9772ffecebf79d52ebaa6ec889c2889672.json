{"ast":null,"code":"import _objectSpread from\"C:/frontend/internship-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./ProfilePage.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=process.env.REACT_APP_API_URL||\"https://intern-backend-yfxc.onrender.com\";const ProfilePage=()=>{const navigate=useNavigate();const[isEditing,setIsEditing]=useState(false);const[profileData,setProfileData]=useState(null);const[newSkill,setNewSkill]=useState('');const token=localStorage.getItem('token');// Fetch profile data on mount\nuseEffect(()=>{const fetchProfile=async()=>{try{const res=await fetch(\"\".concat(API_BASE,\"/api/profile/me\"),{headers:{Authorization:\"Bearer \".concat(token)}});const data=await res.json();if(res.ok){setProfileData(data);}else{console.error('Failed to fetch profile:',data.message);}}catch(err){console.error('Error fetching profile:',err);}};fetchProfile();},[token]);if(!profileData)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading profile...\"});const calculateProfileCompletion=()=>{const fields=[profileData.fullName,profileData.email,profileData.phone,profileData.location,profileData.degree,profileData.college,profileData.graduationYear,profileData.specialization,profileData.skills.length>0,profileData.experience.length>0,profileData.projects.length>0,profileData.resumeFileName];const completedFields=fields.filter(field=>field&&field!=='').length;return Math.round(completedFields/fields.length*100);};const handleInputChange=(field,value)=>{setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const addSkill=()=>{if(newSkill.trim()&&!profileData.skills.includes(newSkill.trim())){setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{skills:[...prev.skills,newSkill.trim()]}));setNewSkill('');}};const removeSkill=skillToRemove=>{setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{skills:prev.skills.filter(skill=>skill!==skillToRemove)}));};const handleResumeUpload=async event=>{const file=event.target.files[0];if(file){const formData=new FormData();formData.append('resume',file);try{const res=await fetch(\"\".concat(API_BASE,\"/api/profile/upload-resume\"),{method:'POST',headers:{Authorization:\"Bearer \".concat(token)},body:formData});const data=await res.json();if(res.ok){setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{resumeFileName:data.fileName}));}else{alert(data.message||'Resume upload failed');}}catch(err){console.error('Resume upload error:',err);alert('Something went wrong while uploading the resume.');}}};const handleSave=async()=>{setIsEditing(false);try{const res=await fetch(\"\".concat(API_BASE,\"/api/profile/update\"),{method:'PUT',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify(profileData)});const data=await res.json();if(!res.ok){alert(data.message||'Failed to update profile');}else{console.log('Profile updated successfully:',data);}}catch(err){console.error('Profile update error:',err);}};const profileCompletion=calculateProfileCompletion();return/*#__PURE__*/_jsx(\"div\",{className:\"profile-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:()=>navigate('/dashboard'),children:\"\\u2190 Back to Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Profile\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage your personal information and preferences\"}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-actions\",children:isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"save-btn\",onClick:handleSave,children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel-btn\",onClick:()=>setIsEditing(false),children:\"Cancel\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"edit-btn\",onClick:()=>setIsEditing(true),children:\"Edit Profile\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-strength-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Profile Strength: \",profileCompletion,\"% Complete\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(profileCompletion,\"%\")}})})]})]})});};export default ProfilePage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","API_BASE","process","env","REACT_APP_API_URL","ProfilePage","navigate","isEditing","setIsEditing","profileData","setProfileData","newSkill","setNewSkill","token","localStorage","getItem","fetchProfile","res","fetch","concat","headers","Authorization","data","json","ok","console","error","message","err","children","calculateProfileCompletion","fields","fullName","email","phone","location","degree","college","graduationYear","specialization","skills","length","experience","projects","resumeFileName","completedFields","filter","field","Math","round","handleInputChange","value","prev","_objectSpread","addSkill","trim","includes","removeSkill","skillToRemove","skill","handleResumeUpload","event","file","target","files","formData","FormData","append","method","body","fileName","alert","handleSave","JSON","stringify","log","profileCompletion","className","onClick","style","width"],"sources":["C:/frontend/internship-frontend/src/components/ProfilePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './ProfilePage.css';\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || \"https://intern-backend-yfxc.onrender.com\";\r\n\r\nconst ProfilePage = () => {\r\n  const navigate = useNavigate();\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [profileData, setProfileData] = useState(null);\r\n  const [newSkill, setNewSkill] = useState('');\r\n  const token = localStorage.getItem('token');\r\n\r\n  // Fetch profile data on mount\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const res = await fetch(`${API_BASE}/api/profile/me`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        const data = await res.json();\r\n        if (res.ok) {\r\n          setProfileData(data);\r\n        } else {\r\n          console.error('Failed to fetch profile:', data.message);\r\n        }\r\n      } catch (err) {\r\n        console.error('Error fetching profile:', err);\r\n      }\r\n    };\r\n    fetchProfile();\r\n  }, [token]);\r\n\r\n  if (!profileData) return <p>Loading profile...</p>;\r\n\r\n  const calculateProfileCompletion = () => {\r\n    const fields = [\r\n      profileData.fullName,\r\n      profileData.email,\r\n      profileData.phone,\r\n      profileData.location,\r\n      profileData.degree,\r\n      profileData.college,\r\n      profileData.graduationYear,\r\n      profileData.specialization,\r\n      profileData.skills.length > 0,\r\n      profileData.experience.length > 0,\r\n      profileData.projects.length > 0,\r\n      profileData.resumeFileName\r\n    ];\r\n    const completedFields = fields.filter(field => field && field !== '').length;\r\n    return Math.round((completedFields / fields.length) * 100);\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setProfileData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const addSkill = () => {\r\n    if (newSkill.trim() && !profileData.skills.includes(newSkill.trim())) {\r\n      setProfileData(prev => ({ ...prev, skills: [...prev.skills, newSkill.trim()] }));\r\n      setNewSkill('');\r\n    }\r\n  };\r\n\r\n  const removeSkill = (skillToRemove) => {\r\n    setProfileData(prev => ({ ...prev, skills: prev.skills.filter(skill => skill !== skillToRemove) }));\r\n  };\r\n\r\n  const handleResumeUpload = async (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      const formData = new FormData();\r\n      formData.append('resume', file);\r\n\r\n      try {\r\n        const res = await fetch(`${API_BASE}/api/profile/upload-resume`, {\r\n          method: 'POST',\r\n          headers: { Authorization: `Bearer ${token}` },\r\n          body: formData\r\n        });\r\n        const data = await res.json();\r\n        if (res.ok) {\r\n          setProfileData(prev => ({\r\n            ...prev,\r\n            resumeFileName: data.fileName,\r\n          }));\r\n        } else {\r\n          alert(data.message || 'Resume upload failed');\r\n        }\r\n      } catch (err) {\r\n        console.error('Resume upload error:', err);\r\n        alert('Something went wrong while uploading the resume.');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setIsEditing(false);\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/profile/update`, {\r\n        method: 'PUT',\r\n        headers: { \r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}` \r\n        },\r\n        body: JSON.stringify(profileData)\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) {\r\n        alert(data.message || 'Failed to update profile');\r\n      } else {\r\n        console.log('Profile updated successfully:', data);\r\n      }\r\n    } catch (err) {\r\n      console.error('Profile update error:', err);\r\n    }\r\n  };\r\n\r\n  const profileCompletion = calculateProfileCompletion();\r\n\r\n  return (\r\n    <div className=\"profile-page\">\r\n      <div className=\"profile-container\">\r\n        <button className=\"back-btn\" onClick={() => navigate('/dashboard')}>\r\n          &larr; Back to Dashboard\r\n        </button>\r\n\r\n        {/* Header & Actions */}\r\n        <div className=\"profile-header\">\r\n          <h1>My Profile</h1>\r\n          <p>Manage your personal information and preferences</p>\r\n          <div className=\"profile-actions\">\r\n            {isEditing ? (\r\n              <>\r\n                <button className=\"save-btn\" onClick={handleSave}>Save Changes</button>\r\n                <button className=\"cancel-btn\" onClick={() => setIsEditing(false)}>Cancel</button>\r\n              </>\r\n            ) : (\r\n              <button className=\"edit-btn\" onClick={() => setIsEditing(true)}>Edit Profile</button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Profile Strength */}\r\n        <div className=\"profile-strength-section\">\r\n          <h3>Profile Strength: {profileCompletion}% Complete</h3>\r\n          <div className=\"progress-bar\">\r\n            <div className=\"progress-fill\" style={{ width: `${profileCompletion}%` }}></div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Basic Info, Education, Skills, Experience, Projects, Resume */}\r\n        {/* You can reuse the JSX you already have here, just replace inputs with profileData and enable/disable based on isEditing */}\r\n        {/* For brevity, not repeating all JSX; it can be integrated with handleInputChange, addSkill, removeSkill, handleResumeUpload */}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfilePage;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}